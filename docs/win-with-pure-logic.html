<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 22 80/20 win with pure logic | Hands-on Elixir &amp; OTP: Cryptocurrency trading bot</title>
  <meta name="description" content="Chapter 22 80/20 win with pure logic | Hands-on Elixir &amp; OTP: Cryptocurrency trading bot" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 22 80/20 win with pure logic | Hands-on Elixir &amp; OTP: Cryptocurrency trading bot" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="Cinderella-Man/hands-on-elixir-and-otp-cryptocurrency-trading-bot" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 22 80/20 win with pure logic | Hands-on Elixir &amp; OTP: Cryptocurrency trading bot" />
  <meta name="twitter:site" content="@kamilskowron" />
  
  

<meta name="author" content="Kamil Skowron" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="layers-of-abstraction.html"/>
<link rel="next" href="back-to-the-monolith.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-52FKGBX2B8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-52FKGBX2B8');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Hands-on Elixir & OTP: Cryptocurrency trading bot</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#want-to-learn-elixir-otp-by-creating-a-real-world-project"><i class="fa fa-check"></i>Want to learn Elixir &amp; OTP by creating a real-world project?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#limit-of-liabilitydisclaimer-of-warranty"><i class="fa fa-check"></i>Limit of Liability/Disclaimer of Warranty</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#pdf-epub"><i class="fa fa-check"></i>PDF &amp; EPUB</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#preface-1"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#who-this-book-is-for"><i class="fa fa-check"></i>Who this book is for</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-this-book-covers"><i class="fa fa-check"></i>What this book covers</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#contributing-errata-and-source-code"><i class="fa fa-check"></i>Contributing, Errata and Source code</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="stream-live-cryptocurrency-prices-from-the-binance-wss.html"><a href="stream-live-cryptocurrency-prices-from-the-binance-wss.html"><i class="fa fa-check"></i><b>1</b> Stream live cryptocurrency prices from the Binance WSS</a>
<ul>
<li class="chapter" data-level="1.1" data-path="stream-live-cryptocurrency-prices-from-the-binance-wss.html"><a href="stream-live-cryptocurrency-prices-from-the-binance-wss.html#objectives"><i class="fa fa-check"></i><b>1.1</b> Objectives</a></li>
<li class="chapter" data-level="1.2" data-path="stream-live-cryptocurrency-prices-from-the-binance-wss.html"><a href="stream-live-cryptocurrency-prices-from-the-binance-wss.html#create-a-new-umbrella-app"><i class="fa fa-check"></i><b>1.2</b> Create a new umbrella app</a></li>
<li class="chapter" data-level="1.3" data-path="stream-live-cryptocurrency-prices-from-the-binance-wss.html"><a href="stream-live-cryptocurrency-prices-from-the-binance-wss.html#create-a-supervised-application-inside-an-umbrella"><i class="fa fa-check"></i><b>1.3</b> Create a supervised application inside an umbrella</a></li>
<li class="chapter" data-level="1.4" data-path="stream-live-cryptocurrency-prices-from-the-binance-wss.html"><a href="stream-live-cryptocurrency-prices-from-the-binance-wss.html#connect-to-binances-websocket-stream-using-the-websockex-module"><i class="fa fa-check"></i><b>1.4</b> Connect to Binance’s WebSocket Stream using the WebSockex module</a></li>
<li class="chapter" data-level="1.5" data-path="stream-live-cryptocurrency-prices-from-the-binance-wss.html"><a href="stream-live-cryptocurrency-prices-from-the-binance-wss.html#decode-incoming-events-using-the-jason-module"><i class="fa fa-check"></i><b>1.5</b> Decode incoming events using the Jason module</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html"><a href="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html"><i class="fa fa-check"></i><b>2</b> Create a naive trading strategy - a single trader process without supervision</a>
<ul>
<li class="chapter" data-level="2.1" data-path="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html"><a href="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html#objectives-1"><i class="fa fa-check"></i><b>2.1</b> Objectives</a></li>
<li class="chapter" data-level="2.2" data-path="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html"><a href="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html#initialisation"><i class="fa fa-check"></i><b>2.2</b> Initialisation</a></li>
<li class="chapter" data-level="2.3" data-path="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html"><a href="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html#how-trading-strategy-will-work"><i class="fa fa-check"></i><b>2.3</b> How trading strategy will work?</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html"><a href="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html#implementation-of-the-first-scenario"><i class="fa fa-check"></i><b>2.3.1</b> Implementation of the first scenario</a></li>
<li class="chapter" data-level="2.3.2" data-path="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html"><a href="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html#implementation-of-the-second-scenario"><i class="fa fa-check"></i><b>2.3.2</b> Implementation of the second scenario</a></li>
<li class="chapter" data-level="2.3.3" data-path="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html"><a href="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html#implementation-of-the-third-scenario"><i class="fa fa-check"></i><b>2.3.3</b> Implementation of the third scenario</a></li>
<li class="chapter" data-level="2.3.4" data-path="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html"><a href="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html#implementation-fallback-scenario"><i class="fa fa-check"></i><b>2.3.4</b> Implementation fallback scenario</a></li>
<li class="chapter" data-level="2.3.5" data-path="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html"><a href="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html#updating-the-naive-interface"><i class="fa fa-check"></i><b>2.3.5</b> Updating the Naive interface</a></li>
<li class="chapter" data-level="2.3.6" data-path="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html"><a href="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html#updating-streamer-app"><i class="fa fa-check"></i><b>2.3.6</b> Updating streamer app</a></li>
<li class="chapter" data-level="2.3.7" data-path="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html"><a href="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html#access-details-to-binance"><i class="fa fa-check"></i><b>2.3.7</b> Access details to Binance</a></li>
<li class="chapter" data-level="2.3.8" data-path="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html"><a href="create-a-naive-trading-strategy---a-single-trader-process-without-supervision.html#test-run"><i class="fa fa-check"></i><b>2.3.8</b> Test run</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduce-pubsub-as-a-communication-method.html"><a href="introduce-pubsub-as-a-communication-method.html"><i class="fa fa-check"></i><b>3</b> Introduce PubSub as a communication method</a>
<ul>
<li class="chapter" data-level="3.1" data-path="introduce-pubsub-as-a-communication-method.html"><a href="introduce-pubsub-as-a-communication-method.html#objectives-2"><i class="fa fa-check"></i><b>3.1</b> Objectives</a></li>
<li class="chapter" data-level="3.2" data-path="introduce-pubsub-as-a-communication-method.html"><a href="introduce-pubsub-as-a-communication-method.html#design"><i class="fa fa-check"></i><b>3.2</b> Design</a></li>
<li class="chapter" data-level="3.3" data-path="introduce-pubsub-as-a-communication-method.html"><a href="introduce-pubsub-as-a-communication-method.html#implementation"><i class="fa fa-check"></i><b>3.3</b> Implementation</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="mock-the-binance-api.html"><a href="mock-the-binance-api.html"><i class="fa fa-check"></i><b>4</b> Mock the Binance API</a>
<ul>
<li class="chapter" data-level="4.1" data-path="mock-the-binance-api.html"><a href="mock-the-binance-api.html#objectives-3"><i class="fa fa-check"></i><b>4.1</b> Objectives</a></li>
<li class="chapter" data-level="4.2" data-path="mock-the-binance-api.html"><a href="mock-the-binance-api.html#design-1"><i class="fa fa-check"></i><b>4.2</b> Design</a></li>
<li class="chapter" data-level="4.3" data-path="mock-the-binance-api.html"><a href="mock-the-binance-api.html#create-binancemock-app"><i class="fa fa-check"></i><b>4.3</b> Create “BinanceMock” app</a></li>
<li class="chapter" data-level="4.4" data-path="mock-the-binance-api.html"><a href="mock-the-binance-api.html#implement-getting-exchange-info"><i class="fa fa-check"></i><b>4.4</b> Implement getting exchange info</a></li>
<li class="chapter" data-level="4.5" data-path="mock-the-binance-api.html"><a href="mock-the-binance-api.html#implement-placing-buy-and-sell-orders"><i class="fa fa-check"></i><b>4.5</b> Implement placing buy and sell orders</a></li>
<li class="chapter" data-level="4.6" data-path="mock-the-binance-api.html"><a href="mock-the-binance-api.html#implement-order-retrival"><i class="fa fa-check"></i><b>4.6</b> Implement order retrival</a></li>
<li class="chapter" data-level="4.7" data-path="mock-the-binance-api.html"><a href="mock-the-binance-api.html#implement-callback-for-incoming-trade-events"><i class="fa fa-check"></i><b>4.7</b> Implement callback for incoming trade events</a></li>
<li class="chapter" data-level="4.8" data-path="mock-the-binance-api.html"><a href="mock-the-binance-api.html#upgrade-trader-and-config"><i class="fa fa-check"></i><b>4.8</b> Upgrade trader and config</a></li>
<li class="chapter" data-level="4.9" data-path="mock-the-binance-api.html"><a href="mock-the-binance-api.html#test-the-implementation"><i class="fa fa-check"></i><b>4.9</b> Test the implementation</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="enable-parallel-trading-on-multiple-symbols.html"><a href="enable-parallel-trading-on-multiple-symbols.html"><i class="fa fa-check"></i><b>5</b> Enable parallel trading on multiple symbols</a>
<ul>
<li class="chapter" data-level="5.1" data-path="enable-parallel-trading-on-multiple-symbols.html"><a href="enable-parallel-trading-on-multiple-symbols.html#objectives-4"><i class="fa fa-check"></i><b>5.1</b> Objectives</a></li>
<li class="chapter" data-level="5.2" data-path="enable-parallel-trading-on-multiple-symbols.html"><a href="enable-parallel-trading-on-multiple-symbols.html#introduction---architectural-design"><i class="fa fa-check"></i><b>5.2</b> Introduction - architectural design</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="enable-parallel-trading-on-multiple-symbols.html"><a href="enable-parallel-trading-on-multiple-symbols.html#update-application-supervisor"><i class="fa fa-check"></i><b>5.2.1</b> Update application supervisor</a></li>
<li class="chapter" data-level="5.2.2" data-path="enable-parallel-trading-on-multiple-symbols.html"><a href="enable-parallel-trading-on-multiple-symbols.html#add-interface-method"><i class="fa fa-check"></i><b>5.2.2</b> Add interface method</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="enable-parallel-trading-on-multiple-symbols.html"><a href="enable-parallel-trading-on-multiple-symbols.html#implement-naive.symbolsupervisor"><i class="fa fa-check"></i><b>5.3</b> Implement <code>Naive.SymbolSupervisor</code></a></li>
<li class="chapter" data-level="5.4" data-path="enable-parallel-trading-on-multiple-symbols.html"><a href="enable-parallel-trading-on-multiple-symbols.html#implement-naive.leader"><i class="fa fa-check"></i><b>5.4</b> Implement <code>Naive.Leader</code></a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="enable-parallel-trading-on-multiple-symbols.html"><a href="enable-parallel-trading-on-multiple-symbols.html#updating-the-leader-module"><i class="fa fa-check"></i><b>5.4.1</b> Updating the <code>leader</code> module</a></li>
<li class="chapter" data-level="5.4.2" data-path="enable-parallel-trading-on-multiple-symbols.html"><a href="enable-parallel-trading-on-multiple-symbols.html#updating-the-naive.trader-module"><i class="fa fa-check"></i><b>5.4.2</b> Updating the <code>Naive.Trader</code> module</a></li>
<li class="chapter" data-level="5.4.3" data-path="enable-parallel-trading-on-multiple-symbols.html"><a href="enable-parallel-trading-on-multiple-symbols.html#finalizing-naive.leader-implementation"><i class="fa fa-check"></i><b>5.4.3</b> Finalizing <code>Naive.Leader</code> implementation</a></li>
<li class="chapter" data-level="5.4.4" data-path="enable-parallel-trading-on-multiple-symbols.html"><a href="enable-parallel-trading-on-multiple-symbols.html#iex-testing"><i class="fa fa-check"></i><b>5.4.4</b> IEx testing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="introduce-a-buy_down_interval-to-make-a-single-trader-more-profitable.html"><a href="introduce-a-buy_down_interval-to-make-a-single-trader-more-profitable.html"><i class="fa fa-check"></i><b>6</b> Introduce a <code>buy_down_interval</code> to make a single trader more profitable</a>
<ul>
<li class="chapter" data-level="6.1" data-path="introduce-a-buy_down_interval-to-make-a-single-trader-more-profitable.html"><a href="introduce-a-buy_down_interval-to-make-a-single-trader-more-profitable.html#objectives-5"><i class="fa fa-check"></i><b>6.1</b> Objectives</a></li>
<li class="chapter" data-level="6.2" data-path="introduce-a-buy_down_interval-to-make-a-single-trader-more-profitable.html"><a href="introduce-a-buy_down_interval-to-make-a-single-trader-more-profitable.html#why-we-need-to-buy-below-the-current-price-feature-overview"><i class="fa fa-check"></i><b>6.2</b> Why we need to buy below the current price? Feature overview</a></li>
<li class="chapter" data-level="6.3" data-path="introduce-a-buy_down_interval-to-make-a-single-trader-more-profitable.html"><a href="introduce-a-buy_down_interval-to-make-a-single-trader-more-profitable.html#naive.trader-implementation"><i class="fa fa-check"></i><b>6.3</b> <code>Naive.Trader</code> implementation</a></li>
<li class="chapter" data-level="6.4" data-path="introduce-a-buy_down_interval-to-make-a-single-trader-more-profitable.html"><a href="introduce-a-buy_down_interval-to-make-a-single-trader-more-profitable.html#naive.leader-implementation"><i class="fa fa-check"></i><b>6.4</b> <code>Naive.Leader</code> implementation</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="introduce-a-buy_down_interval-to-make-a-single-trader-more-profitable.html"><a href="introduce-a-buy_down_interval-to-make-a-single-trader-more-profitable.html#iex-testing-1"><i class="fa fa-check"></i><b>6.4.1</b> IEx testing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="introduce-a-trader-budget-and-calculating-the-quantity.html"><a href="introduce-a-trader-budget-and-calculating-the-quantity.html"><i class="fa fa-check"></i><b>7</b> Introduce a trader budget and calculating the quantity</a>
<ul>
<li class="chapter" data-level="7.1" data-path="introduce-a-trader-budget-and-calculating-the-quantity.html"><a href="introduce-a-trader-budget-and-calculating-the-quantity.html#objectives-6"><i class="fa fa-check"></i><b>7.1</b> Objectives</a></li>
<li class="chapter" data-level="7.2" data-path="introduce-a-trader-budget-and-calculating-the-quantity.html"><a href="introduce-a-trader-budget-and-calculating-the-quantity.html#fetch-step_size"><i class="fa fa-check"></i><b>7.2</b> Fetch <code>step_size</code></a></li>
<li class="chapter" data-level="7.3" data-path="introduce-a-trader-budget-and-calculating-the-quantity.html"><a href="introduce-a-trader-budget-and-calculating-the-quantity.html#append-budget-and-step_size-to-the-traders-state-inside-the-leader"><i class="fa fa-check"></i><b>7.3</b> Append <code>budget</code> and <code>step_size</code> to the <code>Trader</code>’s state inside the <code>Leader</code></a></li>
<li class="chapter" data-level="7.4" data-path="introduce-a-trader-budget-and-calculating-the-quantity.html"><a href="introduce-a-trader-budget-and-calculating-the-quantity.html#append-budget-and-step_size-to-the-traders-state"><i class="fa fa-check"></i><b>7.4</b> Append <code>budget</code> and <code>step_size</code> to the <code>Trader</code>’s state</a></li>
<li class="chapter" data-level="7.5" data-path="introduce-a-trader-budget-and-calculating-the-quantity.html"><a href="introduce-a-trader-budget-and-calculating-the-quantity.html#calculate-quantity"><i class="fa fa-check"></i><b>7.5</b> Calculate quantity</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="introduce-a-trader-budget-and-calculating-the-quantity.html"><a href="introduce-a-trader-budget-and-calculating-the-quantity.html#iex-testing-2"><i class="fa fa-check"></i><b>7.5.1</b> IEx testing</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="add-support-for-multiple-transactions-per-order.html"><a href="add-support-for-multiple-transactions-per-order.html"><i class="fa fa-check"></i><b>8</b> Add support for multiple transactions per order</a>
<ul>
<li class="chapter" data-level="8.1" data-path="add-support-for-multiple-transactions-per-order.html"><a href="add-support-for-multiple-transactions-per-order.html#objectives-7"><i class="fa fa-check"></i><b>8.1</b> Objectives</a></li>
<li class="chapter" data-level="8.2" data-path="add-support-for-multiple-transactions-per-order.html"><a href="add-support-for-multiple-transactions-per-order.html#the-issue-with-the-current-implementation"><i class="fa fa-check"></i><b>8.2</b> The issue with the current implementation</a></li>
<li class="chapter" data-level="8.3" data-path="add-support-for-multiple-transactions-per-order.html"><a href="add-support-for-multiple-transactions-per-order.html#improve-buy-order-filled-callback"><i class="fa fa-check"></i><b>8.3</b> Improve buy order filled callback</a></li>
<li class="chapter" data-level="8.4" data-path="add-support-for-multiple-transactions-per-order.html"><a href="add-support-for-multiple-transactions-per-order.html#implement-buy-order-filled-callback"><i class="fa fa-check"></i><b>8.4</b> Implement buy order “filled” callback</a></li>
<li class="chapter" data-level="8.5" data-path="add-support-for-multiple-transactions-per-order.html"><a href="add-support-for-multiple-transactions-per-order.html#improve-sell-order-callback"><i class="fa fa-check"></i><b>8.5</b> Improve sell order callback</a></li>
<li class="chapter" data-level="8.6" data-path="add-support-for-multiple-transactions-per-order.html"><a href="add-support-for-multiple-transactions-per-order.html#test-the-implementation-1"><i class="fa fa-check"></i><b>8.6</b> Test the implementation</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="run-multiple-traders-in-parallel.html"><a href="run-multiple-traders-in-parallel.html"><i class="fa fa-check"></i><b>9</b> Run multiple traders in parallel</a>
<ul>
<li class="chapter" data-level="9.1" data-path="run-multiple-traders-in-parallel.html"><a href="run-multiple-traders-in-parallel.html#objectives-8"><i class="fa fa-check"></i><b>9.1</b> Objectives</a></li>
<li class="chapter" data-level="9.2" data-path="run-multiple-traders-in-parallel.html"><a href="run-multiple-traders-in-parallel.html#describe-and-design-the-required-functionality"><i class="fa fa-check"></i><b>9.2</b> Describe and design the required functionality</a></li>
<li class="chapter" data-level="9.3" data-path="run-multiple-traders-in-parallel.html"><a href="run-multiple-traders-in-parallel.html#implement-rebuy-inside-naive.trader"><i class="fa fa-check"></i><b>9.3</b> Implement rebuy inside <code>Naive.Trader</code></a></li>
<li class="chapter" data-level="9.4" data-path="run-multiple-traders-in-parallel.html"><a href="run-multiple-traders-in-parallel.html#implement-rebuy-in-the-naive.leader"><i class="fa fa-check"></i><b>9.4</b> Implement rebuy in the <code>Naive.Leader</code></a></li>
<li class="chapter" data-level="9.5" data-path="run-multiple-traders-in-parallel.html"><a href="run-multiple-traders-in-parallel.html#improve-logs-by-assigning-ids-to-traders"><i class="fa fa-check"></i><b>9.5</b> Improve logs by assigning ids to traders</a></li>
<li class="chapter" data-level="9.6" data-path="run-multiple-traders-in-parallel.html"><a href="run-multiple-traders-in-parallel.html#test-the-implementation-2"><i class="fa fa-check"></i><b>9.6</b> Test the implementation</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="fine-tune-trading-strategy-per-symbol.html"><a href="fine-tune-trading-strategy-per-symbol.html"><i class="fa fa-check"></i><b>10</b> Fine-tune trading strategy per symbol</a>
<ul>
<li class="chapter" data-level="10.1" data-path="fine-tune-trading-strategy-per-symbol.html"><a href="fine-tune-trading-strategy-per-symbol.html#objectives-9"><i class="fa fa-check"></i><b>10.1</b> Objectives</a></li>
<li class="chapter" data-level="10.2" data-path="fine-tune-trading-strategy-per-symbol.html"><a href="fine-tune-trading-strategy-per-symbol.html#describe-and-design-the-required-functionality-1"><i class="fa fa-check"></i><b>10.2</b> Describe and design the required functionality</a></li>
<li class="chapter" data-level="10.3" data-path="fine-tune-trading-strategy-per-symbol.html"><a href="fine-tune-trading-strategy-per-symbol.html#add-docker-to-project"><i class="fa fa-check"></i><b>10.3</b> Add docker to project</a></li>
<li class="chapter" data-level="10.4" data-path="fine-tune-trading-strategy-per-symbol.html"><a href="fine-tune-trading-strategy-per-symbol.html#set-up-ecto-inside-the-naive-app"><i class="fa fa-check"></i><b>10.4</b> Set up <code>ecto</code> inside the <code>naive</code> app</a></li>
<li class="chapter" data-level="10.5" data-path="fine-tune-trading-strategy-per-symbol.html"><a href="fine-tune-trading-strategy-per-symbol.html#create-and-migrate-the-db"><i class="fa fa-check"></i><b>10.5</b> Create and migrate the DB</a></li>
<li class="chapter" data-level="10.6" data-path="fine-tune-trading-strategy-per-symbol.html"><a href="fine-tune-trading-strategy-per-symbol.html#seed-symbols-settings"><i class="fa fa-check"></i><b>10.6</b> Seed symbols’ settings</a></li>
<li class="chapter" data-level="10.7" data-path="fine-tune-trading-strategy-per-symbol.html"><a href="fine-tune-trading-strategy-per-symbol.html#update-the-naive.leader-to-fetch-settings"><i class="fa fa-check"></i><b>10.7</b> Update the <code>Naive.Leader</code> to fetch settings</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="supervise-and-autostart-streaming.html"><a href="supervise-and-autostart-streaming.html"><i class="fa fa-check"></i><b>11</b> Supervise and autostart streaming</a>
<ul>
<li class="chapter" data-level="11.1" data-path="supervise-and-autostart-streaming.html"><a href="supervise-and-autostart-streaming.html#objectives-10"><i class="fa fa-check"></i><b>11.1</b> Objectives</a></li>
<li class="chapter" data-level="11.2" data-path="supervise-and-autostart-streaming.html"><a href="supervise-and-autostart-streaming.html#describe-and-design-the-required-functionality-2"><i class="fa fa-check"></i><b>11.2</b> Describe and design the required functionality</a></li>
<li class="chapter" data-level="11.3" data-path="supervise-and-autostart-streaming.html"><a href="supervise-and-autostart-streaming.html#register-the-streamer.binance-processes-with-names"><i class="fa fa-check"></i><b>11.3</b> Register the <code>Streamer.Binance</code> processes with names</a></li>
<li class="chapter" data-level="11.4" data-path="supervise-and-autostart-streaming.html"><a href="supervise-and-autostart-streaming.html#set-up-ecto-inside-the-streamer-app"><i class="fa fa-check"></i><b>11.4</b> Set up <code>ecto</code> inside the <code>streamer</code> app</a></li>
<li class="chapter" data-level="11.5" data-path="supervise-and-autostart-streaming.html"><a href="supervise-and-autostart-streaming.html#create-and-migrate-the-db-1"><i class="fa fa-check"></i><b>11.5</b> Create and migrate the db</a></li>
<li class="chapter" data-level="11.6" data-path="supervise-and-autostart-streaming.html"><a href="supervise-and-autostart-streaming.html#seed-default-settings"><i class="fa fa-check"></i><b>11.6</b> Seed default settings</a></li>
<li class="chapter" data-level="11.7" data-path="supervise-and-autostart-streaming.html"><a href="supervise-and-autostart-streaming.html#implement-the-supervision-tree-and-start-streaming-functionality"><i class="fa fa-check"></i><b>11.7</b> Implement the supervision tree and start streaming functionality</a></li>
<li class="chapter" data-level="11.8" data-path="supervise-and-autostart-streaming.html"><a href="supervise-and-autostart-streaming.html#implement-the-stop-functionality"><i class="fa fa-check"></i><b>11.8</b> Implement the stop functionality</a></li>
<li class="chapter" data-level="11.9" data-path="supervise-and-autostart-streaming.html"><a href="supervise-and-autostart-streaming.html#implement-the-autostart-streaming-functionality"><i class="fa fa-check"></i><b>11.9</b> Implement the autostart streaming functionality</a></li>
<li class="chapter" data-level="11.10" data-path="supervise-and-autostart-streaming.html"><a href="supervise-and-autostart-streaming.html#test-the-implementation-3"><i class="fa fa-check"></i><b>11.10</b> Test the implementation</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="start-stop-shutdown-and-autostart-trading.html"><a href="start-stop-shutdown-and-autostart-trading.html"><i class="fa fa-check"></i><b>12</b> Start, stop, shutdown and autostart trading</a>
<ul>
<li class="chapter" data-level="12.1" data-path="start-stop-shutdown-and-autostart-trading.html"><a href="start-stop-shutdown-and-autostart-trading.html#objectives-11"><i class="fa fa-check"></i><b>12.1</b> Objectives</a></li>
<li class="chapter" data-level="12.2" data-path="start-stop-shutdown-and-autostart-trading.html"><a href="start-stop-shutdown-and-autostart-trading.html#describe-and-design-the-required-functionality-3"><i class="fa fa-check"></i><b>12.2</b> Describe and design the required functionality</a></li>
<li class="chapter" data-level="12.3" data-path="start-stop-shutdown-and-autostart-trading.html"><a href="start-stop-shutdown-and-autostart-trading.html#re-implement-the-start-trading-functionality"><i class="fa fa-check"></i><b>12.3</b> (Re-)Implement the start trading functionality</a></li>
<li class="chapter" data-level="12.4" data-path="start-stop-shutdown-and-autostart-trading.html"><a href="start-stop-shutdown-and-autostart-trading.html#implement-the-stop-trading-functionality"><i class="fa fa-check"></i><b>12.4</b> Implement the stop trading functionality</a></li>
<li class="chapter" data-level="12.5" data-path="start-stop-shutdown-and-autostart-trading.html"><a href="start-stop-shutdown-and-autostart-trading.html#implement-the-autostart-trading-functionality"><i class="fa fa-check"></i><b>12.5</b> Implement the autostart trading functionality</a></li>
<li class="chapter" data-level="12.6" data-path="start-stop-shutdown-and-autostart-trading.html"><a href="start-stop-shutdown-and-autostart-trading.html#implement-the-shutdown-trading-functionality"><i class="fa fa-check"></i><b>12.6</b> Implement the shutdown trading functionality</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="abstract-duplicated-supervision-code.html"><a href="abstract-duplicated-supervision-code.html"><i class="fa fa-check"></i><b>13</b> Abstract duplicated supervision code</a>
<ul>
<li class="chapter" data-level="13.1" data-path="abstract-duplicated-supervision-code.html"><a href="abstract-duplicated-supervision-code.html#objectives-12"><i class="fa fa-check"></i><b>13.1</b> Objectives</a></li>
<li class="chapter" data-level="13.2" data-path="abstract-duplicated-supervision-code.html"><a href="abstract-duplicated-supervision-code.html#overview-of-requirements"><i class="fa fa-check"></i><b>13.2</b> Overview of requirements</a></li>
<li class="chapter" data-level="13.3" data-path="abstract-duplicated-supervision-code.html"><a href="abstract-duplicated-supervision-code.html#pseudo-generalize-core.servicesupervisor-module"><i class="fa fa-check"></i><b>13.3</b> Pseudo generalize Core.ServiceSupervisor module</a></li>
<li class="chapter" data-level="13.4" data-path="abstract-duplicated-supervision-code.html"><a href="abstract-duplicated-supervision-code.html#utilize-pseudo-generalized-code-inside-the-naive-dynamicsymbolsupervisor"><i class="fa fa-check"></i><b>13.4</b> Utilize pseudo generalized code inside the Naive DynamicSymbolSupervisor</a></li>
<li class="chapter" data-level="13.5" data-path="abstract-duplicated-supervision-code.html"><a href="abstract-duplicated-supervision-code.html#implement-a-truly-generic-core.servicesupervisor"><i class="fa fa-check"></i><b>13.5</b> Implement a truly generic <code>Core.ServiceSupervisor</code></a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="abstract-duplicated-supervision-code.html"><a href="abstract-duplicated-supervision-code.html#first-path-starting-with-the-fetch_symbols_to_start0-function"><i class="fa fa-check"></i><b>13.5.1</b> First path starting with the <code>fetch_symbols_to_start/0</code> function</a></li>
<li class="chapter" data-level="13.5.2" data-path="abstract-duplicated-supervision-code.html"><a href="abstract-duplicated-supervision-code.html#second-path-starting-with-the-update_status2"><i class="fa fa-check"></i><b>13.5.2</b> Second path starting with the <code>update_status/2</code></a></li>
<li class="chapter" data-level="13.5.3" data-path="abstract-duplicated-supervision-code.html"><a href="abstract-duplicated-supervision-code.html#third-path-starting-with-the-get_pid1-function"><i class="fa fa-check"></i><b>13.5.3</b> Third path starting with the <code>get_pid/1</code> function</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="abstract-duplicated-supervision-code.html"><a href="abstract-duplicated-supervision-code.html#remove-boilerplate-using-use-macro"><i class="fa fa-check"></i><b>13.6</b> Remove boilerplate using <code>use</code> macro</a></li>
<li class="chapter" data-level="13.7" data-path="abstract-duplicated-supervision-code.html"><a href="abstract-duplicated-supervision-code.html#use-the-core.servicesupervisor-module-inside-the-streamer-application"><i class="fa fa-check"></i><b>13.7</b> Use the <code>Core.ServiceSupervisor</code> module inside the <code>streamer</code> application</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html"><i class="fa fa-check"></i><b>14</b> Store trade events and orders inside the database</a>
<ul>
<li class="chapter" data-level="14.1" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#objectives-13"><i class="fa fa-check"></i><b>14.1</b> Objectives</a></li>
<li class="chapter" data-level="14.2" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#overview-of-requirements-1"><i class="fa fa-check"></i><b>14.2</b> Overview of requirements</a></li>
<li class="chapter" data-level="14.3" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#create-a-new-data_warehouse-application-in-the-umbrella"><i class="fa fa-check"></i><b>14.3</b> Create a new <code>data_warehouse</code> application in the umbrella</a></li>
<li class="chapter" data-level="14.4" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#connect-to-the-database-using-ecto"><i class="fa fa-check"></i><b>14.4</b> Connect to the database using Ecto</a></li>
<li class="chapter" data-level="14.5" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#store-trade-events-data"><i class="fa fa-check"></i><b>14.5</b> Store trade events’ data</a></li>
<li class="chapter" data-level="14.6" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#store-orders-data"><i class="fa fa-check"></i><b>14.6</b> Store orders’ data</a></li>
<li class="chapter" data-level="14.7" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#implement-supervision"><i class="fa fa-check"></i><b>14.7</b> Implement supervision</a>
<ul>
<li class="chapter" data-level="14.7.1" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#create-subscriber_settings-table"><i class="fa fa-check"></i><b>14.7.1</b> Create <code>subscriber_settings</code> table</a></li>
<li class="chapter" data-level="14.7.2" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#redesign-supervision-using-registry"><i class="fa fa-check"></i><b>14.7.2</b> Redesign supervision using Registry</a></li>
<li class="chapter" data-level="14.7.3" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#create-the-datawarehouse.subscriber.dynamicsupervisor-module"><i class="fa fa-check"></i><b>14.7.3</b> Create the <code>DataWarehouse.Subscriber.DynamicSupervisor</code> module</a></li>
<li class="chapter" data-level="14.7.4" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#register-worker-processes-using-via"><i class="fa fa-check"></i><b>14.7.4</b> Register Worker processes using :via</a></li>
<li class="chapter" data-level="14.7.5" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#create-a-new-supervision-level-for-registry-task-and-the-dynamicsupervisor"><i class="fa fa-check"></i><b>14.7.5</b> Create a new supervision level for Registry, Task and the DynamicSupervisor</a></li>
<li class="chapter" data-level="14.7.6" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#link-the-subscribersupervisor-to-the-application"><i class="fa fa-check"></i><b>14.7.6</b> Link the <code>SubscriberSupervisor</code> to the <code>Application</code></a></li>
<li class="chapter" data-level="14.7.7" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#add-interface"><i class="fa fa-check"></i><b>14.7.7</b> Add interface</a></li>
<li class="chapter" data-level="14.7.8" data-path="store-trade-events-and-orders-inside-the-database.html"><a href="store-trade-events-and-orders-inside-the-database.html#test"><i class="fa fa-check"></i><b>14.7.8</b> Test</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="backtest-trading-strategy.html"><a href="backtest-trading-strategy.html"><i class="fa fa-check"></i><b>15</b> Backtest trading strategy</a>
<ul>
<li class="chapter" data-level="15.1" data-path="backtest-trading-strategy.html"><a href="backtest-trading-strategy.html#objectives-14"><i class="fa fa-check"></i><b>15.1</b> Objectives</a></li>
<li class="chapter" data-level="15.2" data-path="backtest-trading-strategy.html"><a href="backtest-trading-strategy.html#overview-of-requirements-2"><i class="fa fa-check"></i><b>15.2</b> Overview of requirements</a></li>
<li class="chapter" data-level="15.3" data-path="backtest-trading-strategy.html"><a href="backtest-trading-strategy.html#implement-the-storing-task"><i class="fa fa-check"></i><b>15.3</b> Implement the storing task</a></li>
<li class="chapter" data-level="15.4" data-path="backtest-trading-strategy.html"><a href="backtest-trading-strategy.html#test-the-backtesting"><i class="fa fa-check"></i><b>15.4</b> Test the backtesting</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="end-to-end-testing.html"><a href="end-to-end-testing.html"><i class="fa fa-check"></i><b>16</b> End-to-end testing</a>
<ul>
<li class="chapter" data-level="16.1" data-path="end-to-end-testing.html"><a href="end-to-end-testing.html#objectives-15"><i class="fa fa-check"></i><b>16.1</b> Objectives</a></li>
<li class="chapter" data-level="16.2" data-path="end-to-end-testing.html"><a href="end-to-end-testing.html#decide-on-the-tested-functionality"><i class="fa fa-check"></i><b>16.2</b> Decide on the tested functionality</a></li>
<li class="chapter" data-level="16.3" data-path="end-to-end-testing.html"><a href="end-to-end-testing.html#implement-basic-test"><i class="fa fa-check"></i><b>16.3</b> Implement basic test</a></li>
<li class="chapter" data-level="16.4" data-path="end-to-end-testing.html"><a href="end-to-end-testing.html#introduce-environment-based-config-files"><i class="fa fa-check"></i><b>16.4</b> Introduce environment based config files</a></li>
<li class="chapter" data-level="16.5" data-path="end-to-end-testing.html"><a href="end-to-end-testing.html#add-convenience-aliases"><i class="fa fa-check"></i><b>16.5</b> Add convenience aliases</a></li>
<li class="chapter" data-level="16.6" data-path="end-to-end-testing.html"><a href="end-to-end-testing.html#cache-initial-seed-data-inside-a-file"><i class="fa fa-check"></i><b>16.6</b> Cache initial seed data inside a file</a></li>
<li class="chapter" data-level="16.7" data-path="end-to-end-testing.html"><a href="end-to-end-testing.html#update-seeding-scripts-to-use-the-binancemock"><i class="fa fa-check"></i><b>16.7</b> Update seeding scripts to use the BinanceMock</a></li>
<li class="chapter" data-level="16.8" data-path="end-to-end-testing.html"><a href="end-to-end-testing.html#introduce-the-core-application"><i class="fa fa-check"></i><b>16.8</b> Introduce the Core application</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="mox-rocks.html"><a href="mox-rocks.html"><i class="fa fa-check"></i><b>17</b> Mox rocks</a>
<ul>
<li class="chapter" data-level="17.1" data-path="mox-rocks.html"><a href="mox-rocks.html#objectives-16"><i class="fa fa-check"></i><b>17.1</b> Objectives</a></li>
<li class="chapter" data-level="17.2" data-path="mox-rocks.html"><a href="mox-rocks.html#introduction-to-mock-based-tests"><i class="fa fa-check"></i><b>17.2</b> Introduction to mock based tests</a></li>
<li class="chapter" data-level="17.3" data-path="mox-rocks.html"><a href="mox-rocks.html#add-the-mox-package"><i class="fa fa-check"></i><b>17.3</b> Add the <code>mox</code> package</a></li>
<li class="chapter" data-level="17.4" data-path="mox-rocks.html"><a href="mox-rocks.html#investigate-the-naive.trader-module"><i class="fa fa-check"></i><b>17.4</b> Investigate the <code>Naive.Trader</code> module</a>
<ul>
<li class="chapter" data-level="17.4.1" data-path="mox-rocks.html"><a href="mox-rocks.html#mock-the-binance-module"><i class="fa fa-check"></i><b>17.4.1</b> Mock the <code>Binance</code> module</a></li>
<li class="chapter" data-level="17.4.2" data-path="mox-rocks.html"><a href="mox-rocks.html#mock-the-naiveleader-module"><i class="fa fa-check"></i><b>17.4.2</b> Mock the <code>NaiveLeader</code> module</a></li>
<li class="chapter" data-level="17.4.3" data-path="mox-rocks.html"><a href="mox-rocks.html#mock-the-phoenix.pubsub-module"><i class="fa fa-check"></i><b>17.4.3</b> Mock the <code>Phoenix.PubSub</code> module</a></li>
<li class="chapter" data-level="17.4.4" data-path="mox-rocks.html"><a href="mox-rocks.html#mock-the-logger-module"><i class="fa fa-check"></i><b>17.4.4</b> Mock the <code>Logger</code> module</a></li>
</ul></li>
<li class="chapter" data-level="17.5" data-path="mox-rocks.html"><a href="mox-rocks.html#implement-a-test-of-the-naive.trader-module"><i class="fa fa-check"></i><b>17.5</b> Implement a test of the <code>Naive.Trader</code> module</a></li>
<li class="chapter" data-level="17.6" data-path="mox-rocks.html"><a href="mox-rocks.html#define-an-alias-to-run-unit-tests"><i class="fa fa-check"></i><b>17.6</b> Define an alias to run unit tests</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="functional-elixir.html"><a href="functional-elixir.html"><i class="fa fa-check"></i><b>18</b> Functional Elixir</a>
<ul>
<li class="chapter" data-level="18.1" data-path="functional-elixir.html"><a href="functional-elixir.html#objectives-17"><i class="fa fa-check"></i><b>18.1</b> Objectives</a></li>
<li class="chapter" data-level="18.2" data-path="functional-elixir.html"><a href="functional-elixir.html#the-reasoning-behind-the-functional-approach"><i class="fa fa-check"></i><b>18.2</b> The reasoning behind the functional approach</a></li>
<li class="chapter" data-level="18.3" data-path="functional-elixir.html"><a href="functional-elixir.html#simplifying-by-splitting"><i class="fa fa-check"></i><b>18.3</b> Simplifying by splitting</a></li>
<li class="chapter" data-level="18.4" data-path="functional-elixir.html"><a href="functional-elixir.html#abstracting-the-pure-logic"><i class="fa fa-check"></i><b>18.4</b> Abstracting the “pure” logic</a>
<ul>
<li class="chapter" data-level="18.4.1" data-path="functional-elixir.html"><a href="functional-elixir.html#place-a-buy-order-rules"><i class="fa fa-check"></i><b>18.4.1</b> Place a buy order rules</a></li>
<li class="chapter" data-level="18.4.2" data-path="functional-elixir.html"><a href="functional-elixir.html#race-condition-rules"><i class="fa fa-check"></i><b>18.4.2</b> Race condition rules</a></li>
<li class="chapter" data-level="18.4.3" data-path="functional-elixir.html"><a href="functional-elixir.html#fetch-the-buy-order-rules"><i class="fa fa-check"></i><b>18.4.3</b> Fetch the buy order rules</a></li>
<li class="chapter" data-level="18.4.4" data-path="functional-elixir.html"><a href="functional-elixir.html#place-a-sell-order-rules"><i class="fa fa-check"></i><b>18.4.4</b> Place a sell order rules</a></li>
<li class="chapter" data-level="18.4.5" data-path="functional-elixir.html"><a href="functional-elixir.html#terminate-trader-rules"><i class="fa fa-check"></i><b>18.4.5</b> Terminate trader rules</a></li>
<li class="chapter" data-level="18.4.6" data-path="functional-elixir.html"><a href="functional-elixir.html#fetch-the-sell-order-rules"><i class="fa fa-check"></i><b>18.4.6</b> Fetch the sell order rules</a></li>
<li class="chapter" data-level="18.4.7" data-path="functional-elixir.html"><a href="functional-elixir.html#trigger-rebuy-rules"><i class="fa fa-check"></i><b>18.4.7</b> Trigger rebuy rules</a></li>
<li class="chapter" data-level="18.4.8" data-path="functional-elixir.html"><a href="functional-elixir.html#the-final-clause-rules"><i class="fa fa-check"></i><b>18.4.8</b> The final clause rules</a></li>
<li class="chapter" data-level="18.4.9" data-path="functional-elixir.html"><a href="functional-elixir.html#changes-to-the-naive.trader-module"><i class="fa fa-check"></i><b>18.4.9</b> Changes to the <code>Naive.Trader</code> module</a></li>
<li class="chapter" data-level="18.4.10" data-path="functional-elixir.html"><a href="functional-elixir.html#naive.trader---place-buy-order"><i class="fa fa-check"></i><b>18.4.10</b> <code>Naive.Trader</code> - place buy order</a></li>
<li class="chapter" data-level="18.4.11" data-path="functional-elixir.html"><a href="functional-elixir.html#naive.trader---race-condition-clause"><i class="fa fa-check"></i><b>18.4.11</b> <code>Naive.Trader</code> - Race condition clause</a></li>
<li class="chapter" data-level="18.4.12" data-path="functional-elixir.html"><a href="functional-elixir.html#naive.trader---place-a-sell-order"><i class="fa fa-check"></i><b>18.4.12</b> <code>Naive.Trader</code> - Place a sell order</a></li>
<li class="chapter" data-level="18.4.13" data-path="functional-elixir.html"><a href="functional-elixir.html#naive.trader---fetch-the-buy-order"><i class="fa fa-check"></i><b>18.4.13</b> <code>Naive.Trader</code> - Fetch the buy order</a></li>
<li class="chapter" data-level="18.4.14" data-path="functional-elixir.html"><a href="functional-elixir.html#naive.trader---terminate-the-trader"><i class="fa fa-check"></i><b>18.4.14</b> <code>Naive.Trader</code> - Terminate the trader</a></li>
<li class="chapter" data-level="18.4.15" data-path="functional-elixir.html"><a href="functional-elixir.html#naive.trader---fetch-the-sell-order"><i class="fa fa-check"></i><b>18.4.15</b> <code>Naive.Trader</code> - Fetch the sell order</a></li>
<li class="chapter" data-level="18.4.16" data-path="functional-elixir.html"><a href="functional-elixir.html#naive.trader---triggering-rebuy"><i class="fa fa-check"></i><b>18.4.16</b> <code>Naive.Trader</code> - Triggering rebuy</a></li>
<li class="chapter" data-level="18.4.17" data-path="functional-elixir.html"><a href="functional-elixir.html#naive.trader---the-final-ignore-clause"><i class="fa fa-check"></i><b>18.4.17</b> <code>Naive.Trader</code> - The final ignore clause</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="functional-elixir.html"><a href="functional-elixir.html#dealing-with-dirty-code"><i class="fa fa-check"></i><b>18.5</b> Dealing with dirty code</a></li>
<li class="chapter" data-level="18.6" data-path="functional-elixir.html"><a href="functional-elixir.html#making-dirty-code-testable"><i class="fa fa-check"></i><b>18.6</b> Making dirty code testable</a>
<ul>
<li class="chapter" data-level="18.6.1" data-path="functional-elixir.html"><a href="functional-elixir.html#passing-functions-arguments"><i class="fa fa-check"></i><b>18.6.1</b> Passing functions arguments</a></li>
<li class="chapter" data-level="18.6.2" data-path="functional-elixir.html"><a href="functional-elixir.html#passing-grouped-functions-as-a-context"><i class="fa fa-check"></i><b>18.6.2</b> Passing grouped functions as a context</a></li>
<li class="chapter" data-level="18.6.3" data-path="functional-elixir.html"><a href="functional-elixir.html#passing-grouped-modules-as-a-context"><i class="fa fa-check"></i><b>18.6.3</b> Passing grouped modules as a context</a></li>
<li class="chapter" data-level="18.6.4" data-path="functional-elixir.html"><a href="functional-elixir.html#injecting-modules-to-modules-attributes-based-on-the-configuration"><i class="fa fa-check"></i><b>18.6.4</b> Injecting modules to module’s attributes based on the configuration</a></li>
</ul></li>
<li class="chapter" data-level="18.7" data-path="functional-elixir.html"><a href="functional-elixir.html#the-power-with-in"><i class="fa fa-check"></i><b>18.7</b> The power <code>with</code>-in</a>
<ul>
<li class="chapter" data-level="18.7.1" data-path="functional-elixir.html"><a href="functional-elixir.html#idiomatic-error-handling"><i class="fa fa-check"></i><b>18.7.1</b> Idiomatic error handling</a></li>
</ul></li>
<li class="chapter" data-level="18.8" data-path="functional-elixir.html"><a href="functional-elixir.html#do-or-not-to-do"><i class="fa fa-check"></i><b>18.8</b> Do or not to do</a></li>
<li class="chapter" data-level="18.9" data-path="functional-elixir.html"><a href="functional-elixir.html#final-thoughts"><i class="fa fa-check"></i><b>18.9</b> Final thoughts</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="idiomatic-otp.html"><a href="idiomatic-otp.html"><i class="fa fa-check"></i><b>19</b> Idiomatic OTP</a>
<ul>
<li class="chapter" data-level="19.1" data-path="idiomatic-otp.html"><a href="idiomatic-otp.html#objectives-18"><i class="fa fa-check"></i><b>19.1</b> Objectives</a></li>
<li class="chapter" data-level="19.2" data-path="idiomatic-otp.html"><a href="idiomatic-otp.html#the-concept"><i class="fa fa-check"></i><b>19.2</b> The concept</a></li>
<li class="chapter" data-level="19.3" data-path="idiomatic-otp.html"><a href="idiomatic-otp.html#initial-implementation"><i class="fa fa-check"></i><b>19.3</b> Initial implementation</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="idiomatic-otp.html"><a href="idiomatic-otp.html#maybe-functions"><i class="fa fa-check"></i><b>19.3.1</b> Maybe functions</a></li>
<li class="chapter" data-level="19.3.2" data-path="idiomatic-otp.html"><a href="idiomatic-otp.html#testing"><i class="fa fa-check"></i><b>19.3.2</b> Testing</a></li>
<li class="chapter" data-level="19.3.3" data-path="idiomatic-otp.html"><a href="idiomatic-otp.html#supervision"><i class="fa fa-check"></i><b>19.3.3</b> Supervision</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="idiomatic-otp.html"><a href="idiomatic-otp.html#idiomatic-solution"><i class="fa fa-check"></i><b>19.4</b> Idiomatic solution</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html"><i class="fa fa-check"></i><b>20</b> Idiomatic trading strategy</a>
<ul>
<li class="chapter" data-level="20.1" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#objectives-19"><i class="fa fa-check"></i><b>20.1</b> Objectives</a></li>
<li class="chapter" data-level="20.2" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#following-the-ohlc-footsteps"><i class="fa fa-check"></i><b>20.2</b> Following the OHLC footsteps</a></li>
<li class="chapter" data-level="20.3" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#simplifying-the-naive-supervision-tree"><i class="fa fa-check"></i><b>20.3</b> Simplifying the Naive supervision tree</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#the-naive.dynamictradersupervisor-module"><i class="fa fa-check"></i><b>20.3.1</b> The <code>Naive.DynamicTraderSupervisor</code> module</a></li>
<li class="chapter" data-level="20.3.2" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#the-naive-module"><i class="fa fa-check"></i><b>20.3.2</b> The <code>Naive</code> module</a></li>
<li class="chapter" data-level="20.3.3" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#the-naive.supervisor-module"><i class="fa fa-check"></i><b>20.3.3</b> The <code>Naive.Supervisor</code> module</a></li>
<li class="chapter" data-level="20.3.4" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#the-naive.trader-module"><i class="fa fa-check"></i><b>20.3.4</b> The <code>Naive.Trader</code> module</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#supporting-multiple-positions"><i class="fa fa-check"></i><b>20.4</b> Supporting multiple positions</a>
<ul>
<li class="chapter" data-level="20.4.1" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#initialization"><i class="fa fa-check"></i><b>20.4.1</b> Initialization</a></li>
<li class="chapter" data-level="20.4.2" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#parallelising-the-strategy"><i class="fa fa-check"></i><b>20.4.2</b> Parallelising the strategy</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#retrofitting-the-shutdown-functionality"><i class="fa fa-check"></i><b>20.5</b> Retrofitting the “shutdown” functionality</a>
<ul>
<li class="chapter" data-level="20.5.1" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#handling-updated-settings"><i class="fa fa-check"></i><b>20.5.1</b> Handling updated settings</a></li>
<li class="chapter" data-level="20.5.2" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#updating-the-naive.strategy-to-honour-the-shutdown-state"><i class="fa fa-check"></i><b>20.5.2</b> Updating the <code>Naive.Strategy</code> to honour the “shutdown” state</a></li>
</ul></li>
<li class="chapter" data-level="20.6" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#updating-the-strategy-to-handle-rebuys"><i class="fa fa-check"></i><b>20.6</b> Updating the Strategy to handle rebuys</a></li>
<li class="chapter" data-level="20.7" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#fetching-active-positions"><i class="fa fa-check"></i><b>20.7</b> Fetching active positions</a></li>
<li class="chapter" data-level="20.8" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#tidying-up"><i class="fa fa-check"></i><b>20.8</b> Tidying up</a></li>
<li class="chapter" data-level="20.9" data-path="idiomatic-trading-strategy.html"><a href="idiomatic-trading-strategy.html#final-thoughts-1"><i class="fa fa-check"></i><b>20.9</b> Final thoughts</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html"><i class="fa fa-check"></i><b>21</b> Layers of abstraction</a>
<ul>
<li class="chapter" data-level="21.1" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#objectives-20"><i class="fa fa-check"></i><b>21.1</b> Objectives</a></li>
<li class="chapter" data-level="21.2" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#admitting-the-simplification"><i class="fa fa-check"></i><b>21.2</b> Admitting the simplification</a></li>
<li class="chapter" data-level="21.3" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#abstracting-the-exchange"><i class="fa fa-check"></i><b>21.3</b> Abstracting the exchange</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#defining-the-core.exchange-behaviour"><i class="fa fa-check"></i><b>21.3.1</b> Defining the <code>Core.Exchange</code> behaviour</a></li>
<li class="chapter" data-level="21.3.2" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#implementation-of-the-core.exchange.binance-module"><i class="fa fa-check"></i><b>21.3.2</b> Implementation of the <code>Core.Exchange.Binance</code> module</a></li>
<li class="chapter" data-level="21.3.3" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#updating-the-binancemock-module-to-implement-the-core.exchange-behaviour"><i class="fa fa-check"></i><b>21.3.3</b> Updating the <code>BinanceMock</code> module to implement the <code>Core.Exchange</code> behaviour</a></li>
<li class="chapter" data-level="21.3.4" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#updating-the-naive.strategy"><i class="fa fa-check"></i><b>21.3.4</b> Updating the <code>Naive.Strategy</code></a></li>
<li class="chapter" data-level="21.3.5" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#updating-the-seed-scripts"><i class="fa fa-check"></i><b>21.3.5</b> Updating the seed scripts</a></li>
<li class="chapter" data-level="21.3.6" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#manual-testing-after-the-refactoring"><i class="fa fa-check"></i><b>21.3.6</b> Manual testing after the refactoring</a></li>
<li class="chapter" data-level="21.3.7" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#storing-the-data"><i class="fa fa-check"></i><b>21.3.7</b> Storing the data</a></li>
<li class="chapter" data-level="21.3.8" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#the-mox-approach-summary"><i class="fa fa-check"></i><b>21.3.8</b> The <code>Mox</code> approach summary</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#mimicking-the-reality"><i class="fa fa-check"></i><b>21.4</b> Mimicking the reality</a>
<ul>
<li class="chapter" data-level="21.4.1" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#updating-the-naive.strategy-1"><i class="fa fa-check"></i><b>21.4.1</b> Updating the <code>Naive.Strategy</code></a></li>
<li class="chapter" data-level="21.4.2" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#testing-the-naive.strategy"><i class="fa fa-check"></i><b>21.4.2</b> Testing the <code>Naive.Strategy</code></a></li>
<li class="chapter" data-level="21.4.3" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#logging-elephant-in-the-room"><i class="fa fa-check"></i><b>21.4.3</b> Logging elephant in the room</a></li>
</ul></li>
<li class="chapter" data-level="21.5" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#swapping-back-to-attributes"><i class="fa fa-check"></i><b>21.5</b> Swapping back to attributes</a>
<ul>
<li class="chapter" data-level="21.5.1" data-path="layers-of-abstraction.html"><a href="layers-of-abstraction.html#config-files"><i class="fa fa-check"></i><b>21.5.1</b> Config files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="win-with-pure-logic.html"><a href="win-with-pure-logic.html"><i class="fa fa-check"></i><b>22</b> 80/20 win with pure logic</a>
<ul>
<li class="chapter" data-level="22.1" data-path="win-with-pure-logic.html"><a href="win-with-pure-logic.html#objectives-21"><i class="fa fa-check"></i><b>22.1</b> Objectives</a></li>
<li class="chapter" data-level="22.2" data-path="win-with-pure-logic.html"><a href="win-with-pure-logic.html#testing-the-pure-logic"><i class="fa fa-check"></i><b>22.2</b> Testing the pure logic</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html"><i class="fa fa-check"></i><b>23</b> Back to the Monolith</a>
<ul>
<li class="chapter" data-level="23.1" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#objectives-22"><i class="fa fa-check"></i><b>23.1</b> Objectives</a></li>
<li class="chapter" data-level="23.2" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#reverting-the-course-to-the-monolith"><i class="fa fa-check"></i><b>23.2</b> Reverting the course to the monolith</a></li>
<li class="chapter" data-level="23.3" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#creating-a-new-phoenix-app"><i class="fa fa-check"></i><b>23.3</b> Creating a new Phoenix app</a></li>
<li class="chapter" data-level="23.4" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#reintegrating-the-core-app"><i class="fa fa-check"></i><b>23.4</b> Reintegrating the <code>core</code> app</a></li>
<li class="chapter" data-level="23.5" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#reintegrating-the-binance_mock-app"><i class="fa fa-check"></i><b>23.5</b> Reintegrating the <code>binance_mock</code> app</a></li>
<li class="chapter" data-level="23.6" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#reintegrating-the-streamer-app"><i class="fa fa-check"></i><b>23.6</b> Reintegrating the <code>streamer</code> app</a>
<ul>
<li class="chapter" data-level="23.6.1" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#supervisor"><i class="fa fa-check"></i><b>23.6.1</b> Supervisor</a></li>
<li class="chapter" data-level="23.6.2" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#worker"><i class="fa fa-check"></i><b>23.6.2</b> Worker</a></li>
<li class="chapter" data-level="23.6.3" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#dynamicstreamersupervisor"><i class="fa fa-check"></i><b>23.6.3</b> DynamicStreamerSupervisor</a></li>
<li class="chapter" data-level="23.6.4" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#schemasettings.ex-and-schemastreaming_status_enum.ex"><i class="fa fa-check"></i><b>23.6.4</b> schema/settings.ex and schema/streaming_status_enum.ex</a></li>
<li class="chapter" data-level="23.6.5" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#application"><i class="fa fa-check"></i><b>23.6.5</b> application</a></li>
<li class="chapter" data-level="23.6.6" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#db-migrations-and-seeding"><i class="fa fa-check"></i><b>23.6.6</b> DB migrations and seeding</a></li>
<li class="chapter" data-level="23.6.7" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#config"><i class="fa fa-check"></i><b>23.6.7</b> Config</a></li>
<li class="chapter" data-level="23.6.8" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#deps"><i class="fa fa-check"></i><b>23.6.8</b> Deps</a></li>
</ul></li>
<li class="chapter" data-level="23.7" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#reintegrating-the-naive-app"><i class="fa fa-check"></i><b>23.7</b> Reintegrating the <code>naive</code> app</a>
<ul>
<li class="chapter" data-level="23.7.1" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#naive.ex"><i class="fa fa-check"></i><b>23.7.1</b> naive.ex</a></li>
<li class="chapter" data-level="23.7.2" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#strategy.ex---formula.ex"><i class="fa fa-check"></i><b>23.7.2</b> strategy.ex -&gt; formula.ex</a></li>
<li class="chapter" data-level="23.7.3" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#trader.ex"><i class="fa fa-check"></i><b>23.7.3</b> <code>trader.ex</code></a></li>
<li class="chapter" data-level="23.7.4" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#supervisor.ex"><i class="fa fa-check"></i><b>23.7.4</b> <code>supervisor.ex</code></a></li>
<li class="chapter" data-level="23.7.5" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#dynamic_trader_supervisor.ex"><i class="fa fa-check"></i><b>23.7.5</b> <code>dynamic_trader_supervisor.ex</code></a></li>
<li class="chapter" data-level="23.7.6" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#repo-and-schema-files"><i class="fa fa-check"></i><b>23.7.6</b> Repo and <code>schema</code> files</a></li>
<li class="chapter" data-level="23.7.7" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#application.ex"><i class="fa fa-check"></i><b>23.7.7</b> <code>application.ex</code></a></li>
<li class="chapter" data-level="23.7.8" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#migration-and-seeding"><i class="fa fa-check"></i><b>23.7.8</b> Migration and seeding</a></li>
<li class="chapter" data-level="23.7.9" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#configuration"><i class="fa fa-check"></i><b>23.7.9</b> Configuration</a></li>
<li class="chapter" data-level="23.7.10" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#tests"><i class="fa fa-check"></i><b>23.7.10</b> Tests</a></li>
<li class="chapter" data-level="23.7.11" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#dependencies"><i class="fa fa-check"></i><b>23.7.11</b> Dependencies</a></li>
</ul></li>
<li class="chapter" data-level="23.8" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#reintegrating-the-data_warehouse-app"><i class="fa fa-check"></i><b>23.8</b> Reintegrating the <code>data_warehouse</code> app</a>
<ul>
<li class="chapter" data-level="23.8.1" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#exchangeorder.ex"><i class="fa fa-check"></i><b>23.8.1</b> <code>exchange/order.ex</code></a></li>
<li class="chapter" data-level="23.8.2" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#exchangetrade_event.ex"><i class="fa fa-check"></i><b>23.8.2</b> <code>exchange/trade_event.ex</code></a></li>
<li class="chapter" data-level="23.8.3" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#datapublisher.ex"><i class="fa fa-check"></i><b>23.8.3</b> <code>data/publisher.ex</code></a></li>
<li class="chapter" data-level="23.8.4" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#datacollector.ex"><i class="fa fa-check"></i><b>23.8.4</b> <code>data/collector.ex</code></a></li>
<li class="chapter" data-level="23.8.5" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#datacollectorcollector_supervisor.ex"><i class="fa fa-check"></i><b>23.8.5</b> <code>data/collector/collector_supervisor.ex</code></a></li>
<li class="chapter" data-level="23.8.6" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#datacollectordynamic_worker_supervisor.ex"><i class="fa fa-check"></i><b>23.8.6</b> <code>/data/collector/dynamic_worker_supervisor.ex</code></a></li>
<li class="chapter" data-level="23.8.7" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#datacollectorsettings_status_enum.ex"><i class="fa fa-check"></i><b>23.8.7</b> <code>/data/collector/settings_status_enum.ex</code></a></li>
<li class="chapter" data-level="23.8.8" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#datacollectorsettings.ex"><i class="fa fa-check"></i><b>23.8.8</b> <code>/data/collector/settings.ex</code></a></li>
<li class="chapter" data-level="23.8.9" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#datacollectorworker.ex"><i class="fa fa-check"></i><b>23.8.9</b> <code>/data/collector/worker.ex</code></a></li>
<li class="chapter" data-level="23.8.10" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#supervision-tree"><i class="fa fa-check"></i><b>23.8.10</b> Supervision tree</a></li>
<li class="chapter" data-level="23.8.11" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#migrations"><i class="fa fa-check"></i><b>23.8.11</b> Migrations</a></li>
</ul></li>
<li class="chapter" data-level="23.9" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#reintegrating-the-indicator-app"><i class="fa fa-check"></i><b>23.9</b> Reintegrating the <code>indicator</code> app</a>
<ul>
<li class="chapter" data-level="23.9.1" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#dataaggregator.ex"><i class="fa fa-check"></i><b>23.9.1</b> /data/aggregator.ex</a></li>
<li class="chapter" data-level="23.9.2" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#dataaggregatorohlc.ex"><i class="fa fa-check"></i><b>23.9.2</b> /data/aggregator/ohlc.ex</a></li>
<li class="chapter" data-level="23.9.3" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#dataaggregatorohlcworker.ex"><i class="fa fa-check"></i><b>23.9.3</b> /data/aggregator/ohlc/worker.ex</a></li>
<li class="chapter" data-level="23.9.4" data-path="back-to-the-monolith.html"><a href="back-to-the-monolith.html#supervision-tree-1"><i class="fa fa-check"></i><b>23.9.4</b> Supervision tree</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://www.bookdown.org/" target="blank">Created with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Hands-on Elixir &amp; OTP: Cryptocurrency trading bot</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="win-with-pure-logic" class="section level1 hasAnchor" number="22">
<h1><span class="header-section-number">Chapter 22</span> 80/20 win with pure logic<a href="win-with-pure-logic.html#win-with-pure-logic" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="objectives-21" class="section level2 hasAnchor" number="22.1">
<h2><span class="header-section-number">22.1</span> Objectives<a href="win-with-pure-logic.html#objectives-21" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>testing the pure logic</li>
</ul>
</div>
<div id="testing-the-pure-logic" class="section level2 hasAnchor" number="22.2">
<h2><span class="header-section-number">22.2</span> Testing the pure logic<a href="win-with-pure-logic.html#testing-the-pure-logic" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We worked hard across the last few chapters to make our code more testable. We wandered into the world of mocking and mimicking to allow us to write end-to-end tests, but we didn’t really reap the benefits of the fact that we made a substantial part of our code pure.</p>
<p>In this chapter, we will cover most of our trading strategy with tests to showcase the value of pure/non-pure code segregation.</p>
<p>We will start by removing all “hello world” tests that were generated when we were creating each of the umbrella apps - all of them look the same:</p>
<pre><code>  test &quot;greets the world&quot; do
    assert $app.hello() == :world
  end</code></pre>
<p>After taking care of this nuisance, we can now focus on testing our strategy.</p>
<p>We will start by opening the <code>apps/naive/test/naive/strategy_test.exs</code> where we will add tests of <code>generate_decision/4</code> function. We will test each clause starting with the first (returning <code>:place_buy_order</code>):</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb542-1"><a href="win-with-pure-logic.html#cb542-1" tabindex="-1"></a>  <span class="co"># /apps/naive/test/naive/lib/strategy_test.exs</span></span>
<span id="cb542-2"><a href="win-with-pure-logic.html#cb542-2" tabindex="-1"></a>  <span class="ot">@tag</span> <span class="va">:unit</span></span>
<span id="cb542-3"><a href="win-with-pure-logic.html#cb542-3" tabindex="-1"></a>  test <span class="st">&quot;Generating place buy order decision&quot;</span> <span class="kw">do</span></span>
<span id="cb542-4"><a href="win-with-pure-logic.html#cb542-4" tabindex="-1"></a>    assert <span class="cn">Strategy</span><span class="op">.</span>generate_decision<span class="fu">(</span></span>
<span id="cb542-5"><a href="win-with-pure-logic.html#cb542-5" tabindex="-1"></a>             %<span class="cn">TradeEvent</span><span class="fu">{</span></span>
<span id="cb542-6"><a href="win-with-pure-logic.html#cb542-6" tabindex="-1"></a>               <span class="va">price:</span> <span class="st">&quot;1.0&quot;</span></span>
<span id="cb542-7"><a href="win-with-pure-logic.html#cb542-7" tabindex="-1"></a>             <span class="fu">}</span>,</span>
<span id="cb542-8"><a href="win-with-pure-logic.html#cb542-8" tabindex="-1"></a>             generate_position<span class="fu">(</span>%<span class="fu">{</span></span>
<span id="cb542-9"><a href="win-with-pure-logic.html#cb542-9" tabindex="-1"></a>               <span class="va">budget:</span> <span class="st">&quot;10.0&quot;</span>,</span>
<span id="cb542-10"><a href="win-with-pure-logic.html#cb542-10" tabindex="-1"></a>               <span class="va">buy_down_interval:</span> <span class="st">&quot;0.01&quot;</span></span>
<span id="cb542-11"><a href="win-with-pure-logic.html#cb542-11" tabindex="-1"></a>             <span class="fu">})</span>,</span>
<span id="cb542-12"><a href="win-with-pure-logic.html#cb542-12" tabindex="-1"></a>             <span class="va">:ignored</span>,</span>
<span id="cb542-13"><a href="win-with-pure-logic.html#cb542-13" tabindex="-1"></a>             <span class="va">:ignored</span></span>
<span id="cb542-14"><a href="win-with-pure-logic.html#cb542-14" tabindex="-1"></a>           <span class="fu">)</span> <span class="op">==</span> <span class="fu">{</span><span class="va">:place_buy_order</span>, <span class="st">&quot;0.99000000&quot;</span>, <span class="st">&quot;10.00000000&quot;</span><span class="fu">}</span></span>
<span id="cb542-15"><a href="win-with-pure-logic.html#cb542-15" tabindex="-1"></a>  <span class="kw">end</span></span></code></pre></div>
<p>The above test checks that the function returns’: place_buy_order’ in case of a lack of buy/sell order. Inside the test, we are using a helper function that we need to add below:</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb543-1"><a href="win-with-pure-logic.html#cb543-1" tabindex="-1"></a>  <span class="co"># /apps/naive/test/naive/lib/strategy_test.exs</span></span>
<span id="cb543-2"><a href="win-with-pure-logic.html#cb543-2" tabindex="-1"></a>  <span class="kw">defp</span> generate_position<span class="fu">(</span>data<span class="fu">)</span> <span class="kw">do</span></span>
<span id="cb543-3"><a href="win-with-pure-logic.html#cb543-3" tabindex="-1"></a>    %<span class="fu">{</span></span>
<span id="cb543-4"><a href="win-with-pure-logic.html#cb543-4" tabindex="-1"></a>      <span class="va">id:</span> <span class="dv">1_678_920_020_426</span>,</span>
<span id="cb543-5"><a href="win-with-pure-logic.html#cb543-5" tabindex="-1"></a>      <span class="va">symbol:</span> <span class="st">&quot;XRPUSDT&quot;</span>,</span>
<span id="cb543-6"><a href="win-with-pure-logic.html#cb543-6" tabindex="-1"></a>      <span class="va">profit_interval:</span> <span class="st">&quot;0.005&quot;</span>,</span>
<span id="cb543-7"><a href="win-with-pure-logic.html#cb543-7" tabindex="-1"></a>      <span class="va">rebuy_interval:</span> <span class="st">&quot;0.01&quot;</span>,</span>
<span id="cb543-8"><a href="win-with-pure-logic.html#cb543-8" tabindex="-1"></a>      <span class="va">rebuy_notified:</span> <span class="cn">false</span>,</span>
<span id="cb543-9"><a href="win-with-pure-logic.html#cb543-9" tabindex="-1"></a>      <span class="va">budget:</span> <span class="st">&quot;10.0&quot;</span>,</span>
<span id="cb543-10"><a href="win-with-pure-logic.html#cb543-10" tabindex="-1"></a>      <span class="va">buy_order:</span> <span class="cn">nil</span>,</span>
<span id="cb543-11"><a href="win-with-pure-logic.html#cb543-11" tabindex="-1"></a>      <span class="va">sell_order:</span> <span class="cn">nil</span>,</span>
<span id="cb543-12"><a href="win-with-pure-logic.html#cb543-12" tabindex="-1"></a>      <span class="va">buy_down_interval:</span> <span class="st">&quot;0.01&quot;</span>,</span>
<span id="cb543-13"><a href="win-with-pure-logic.html#cb543-13" tabindex="-1"></a>      <span class="va">tick_size:</span> <span class="st">&quot;0.00010000&quot;</span>,</span>
<span id="cb543-14"><a href="win-with-pure-logic.html#cb543-14" tabindex="-1"></a>      <span class="va">step_size:</span> <span class="st">&quot;1.00000000&quot;</span></span>
<span id="cb543-15"><a href="win-with-pure-logic.html#cb543-15" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb543-16"><a href="win-with-pure-logic.html#cb543-16" tabindex="-1"></a>    <span class="op">|&gt;</span> <span class="cn">Map</span><span class="op">.</span>merge<span class="fu">(</span>data<span class="fu">)</span></span>
<span id="cb543-17"><a href="win-with-pure-logic.html#cb543-17" tabindex="-1"></a>    <span class="op">|&gt;</span> then<span class="fu">(</span><span class="op">&amp;</span>struct<span class="fu">(</span><span class="cn">Strategy</span><span class="op">.</span><span class="cn">Position</span>, <span class="op">&amp;</span><span class="dv">1</span><span class="fu">))</span></span>
<span id="cb543-18"><a href="win-with-pure-logic.html#cb543-18" tabindex="-1"></a>  <span class="kw">end</span></span></code></pre></div>
<p>At this moment, we should already be able to run the above test:</p>
<pre><code>$ MIX_ENV=test mix test.unit
...
==&gt; naive
...
3 tests, 0 failures, 1 excluded</code></pre>
<p>We will now take care of the remaining clauses of <code>generate_decision/4</code> function:</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb545-1"><a href="win-with-pure-logic.html#cb545-1" tabindex="-1"></a>  <span class="co"># /apps/naive/test/naive/lib/strategy_test.exs</span></span>
<span id="cb545-2"><a href="win-with-pure-logic.html#cb545-2" tabindex="-1"></a>  <span class="ot">@tag</span> <span class="va">:unit</span></span>
<span id="cb545-3"><a href="win-with-pure-logic.html#cb545-3" tabindex="-1"></a>  test <span class="st">&quot;Generating skip decision as buy and sell already placed(race condition occurred)&quot;</span> <span class="kw">do</span></span>
<span id="cb545-4"><a href="win-with-pure-logic.html#cb545-4" tabindex="-1"></a>    assert <span class="cn">Strategy</span><span class="op">.</span>generate_decision<span class="fu">(</span></span>
<span id="cb545-5"><a href="win-with-pure-logic.html#cb545-5" tabindex="-1"></a>             %<span class="cn">TradeEvent</span><span class="fu">{</span></span>
<span id="cb545-6"><a href="win-with-pure-logic.html#cb545-6" tabindex="-1"></a>               <span class="va">buyer_order_id:</span> <span class="dv">123</span></span>
<span id="cb545-7"><a href="win-with-pure-logic.html#cb545-7" tabindex="-1"></a>             <span class="fu">}</span>,</span>
<span id="cb545-8"><a href="win-with-pure-logic.html#cb545-8" tabindex="-1"></a>             generate_position<span class="fu">(</span>%<span class="fu">{</span></span>
<span id="cb545-9"><a href="win-with-pure-logic.html#cb545-9" tabindex="-1"></a>               <span class="va">buy_order:</span> %<span class="cn">Binance</span><span class="op">.</span><span class="cn">OrderResponse</span><span class="fu">{</span></span>
<span id="cb545-10"><a href="win-with-pure-logic.html#cb545-10" tabindex="-1"></a>                 <span class="va">order_id:</span> <span class="dv">123</span>,</span>
<span id="cb545-11"><a href="win-with-pure-logic.html#cb545-11" tabindex="-1"></a>                 <span class="va">status:</span> <span class="st">&quot;FILLED&quot;</span></span>
<span id="cb545-12"><a href="win-with-pure-logic.html#cb545-12" tabindex="-1"></a>               <span class="fu">}</span>,</span>
<span id="cb545-13"><a href="win-with-pure-logic.html#cb545-13" tabindex="-1"></a>               <span class="va">sell_order:</span> %<span class="cn">Binance</span><span class="op">.</span><span class="cn">OrderResponse</span><span class="fu">{}</span></span>
<span id="cb545-14"><a href="win-with-pure-logic.html#cb545-14" tabindex="-1"></a>             <span class="fu">})</span>,</span>
<span id="cb545-15"><a href="win-with-pure-logic.html#cb545-15" tabindex="-1"></a>             <span class="va">:ignored</span>,</span>
<span id="cb545-16"><a href="win-with-pure-logic.html#cb545-16" tabindex="-1"></a>             <span class="va">:ignored</span></span>
<span id="cb545-17"><a href="win-with-pure-logic.html#cb545-17" tabindex="-1"></a>           <span class="fu">)</span> <span class="op">==</span> <span class="va">:skip</span></span>
<span id="cb545-18"><a href="win-with-pure-logic.html#cb545-18" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb545-19"><a href="win-with-pure-logic.html#cb545-19" tabindex="-1"></a></span>
<span id="cb545-20"><a href="win-with-pure-logic.html#cb545-20" tabindex="-1"></a>  <span class="ot">@tag</span> <span class="va">:unit</span></span>
<span id="cb545-21"><a href="win-with-pure-logic.html#cb545-21" tabindex="-1"></a>  test <span class="st">&quot;Generating place sell order decision&quot;</span> <span class="kw">do</span></span>
<span id="cb545-22"><a href="win-with-pure-logic.html#cb545-22" tabindex="-1"></a>    assert <span class="cn">Strategy</span><span class="op">.</span>generate_decision<span class="fu">(</span></span>
<span id="cb545-23"><a href="win-with-pure-logic.html#cb545-23" tabindex="-1"></a>             %<span class="cn">TradeEvent</span><span class="fu">{}</span>,</span>
<span id="cb545-24"><a href="win-with-pure-logic.html#cb545-24" tabindex="-1"></a>             generate_position<span class="fu">(</span>%<span class="fu">{</span></span>
<span id="cb545-25"><a href="win-with-pure-logic.html#cb545-25" tabindex="-1"></a>               <span class="va">buy_order:</span> %<span class="cn">Binance</span><span class="op">.</span><span class="cn">OrderResponse</span><span class="fu">{</span></span>
<span id="cb545-26"><a href="win-with-pure-logic.html#cb545-26" tabindex="-1"></a>                 <span class="va">status:</span> <span class="st">&quot;FILLED&quot;</span>,</span>
<span id="cb545-27"><a href="win-with-pure-logic.html#cb545-27" tabindex="-1"></a>                 <span class="va">price:</span> <span class="st">&quot;1.00&quot;</span></span>
<span id="cb545-28"><a href="win-with-pure-logic.html#cb545-28" tabindex="-1"></a>               <span class="fu">}</span>,</span>
<span id="cb545-29"><a href="win-with-pure-logic.html#cb545-29" tabindex="-1"></a>               <span class="va">sell_order:</span> <span class="cn">nil</span>,</span>
<span id="cb545-30"><a href="win-with-pure-logic.html#cb545-30" tabindex="-1"></a>               <span class="va">profit_interval:</span> <span class="st">&quot;0.01&quot;</span>,</span>
<span id="cb545-31"><a href="win-with-pure-logic.html#cb545-31" tabindex="-1"></a>               <span class="va">tick_size:</span> <span class="st">&quot;0.0001&quot;</span></span>
<span id="cb545-32"><a href="win-with-pure-logic.html#cb545-32" tabindex="-1"></a>             <span class="fu">})</span>,</span>
<span id="cb545-33"><a href="win-with-pure-logic.html#cb545-33" tabindex="-1"></a>             <span class="va">:ignored</span>,</span>
<span id="cb545-34"><a href="win-with-pure-logic.html#cb545-34" tabindex="-1"></a>             <span class="va">:ignored</span></span>
<span id="cb545-35"><a href="win-with-pure-logic.html#cb545-35" tabindex="-1"></a>           <span class="fu">)</span> <span class="op">==</span> <span class="fu">{</span><span class="va">:place_sell_order</span>, <span class="st">&quot;1.0120&quot;</span><span class="fu">}</span></span>
<span id="cb545-36"><a href="win-with-pure-logic.html#cb545-36" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb545-37"><a href="win-with-pure-logic.html#cb545-37" tabindex="-1"></a></span>
<span id="cb545-38"><a href="win-with-pure-logic.html#cb545-38" tabindex="-1"></a>  <span class="ot">@tag</span> <span class="va">:unit</span></span>
<span id="cb545-39"><a href="win-with-pure-logic.html#cb545-39" tabindex="-1"></a>  test <span class="st">&quot;Generating fetch buy order decision&quot;</span> <span class="kw">do</span></span>
<span id="cb545-40"><a href="win-with-pure-logic.html#cb545-40" tabindex="-1"></a>    assert <span class="cn">Strategy</span><span class="op">.</span>generate_decision<span class="fu">(</span></span>
<span id="cb545-41"><a href="win-with-pure-logic.html#cb545-41" tabindex="-1"></a>             %<span class="cn">TradeEvent</span><span class="fu">{</span></span>
<span id="cb545-42"><a href="win-with-pure-logic.html#cb545-42" tabindex="-1"></a>               <span class="va">buyer_order_id:</span> <span class="dv">1234</span></span>
<span id="cb545-43"><a href="win-with-pure-logic.html#cb545-43" tabindex="-1"></a>             <span class="fu">}</span>,</span>
<span id="cb545-44"><a href="win-with-pure-logic.html#cb545-44" tabindex="-1"></a>             generate_position<span class="fu">(</span>%<span class="fu">{</span></span>
<span id="cb545-45"><a href="win-with-pure-logic.html#cb545-45" tabindex="-1"></a>               <span class="va">buy_order:</span> %<span class="cn">Binance</span><span class="op">.</span><span class="cn">OrderResponse</span><span class="fu">{</span></span>
<span id="cb545-46"><a href="win-with-pure-logic.html#cb545-46" tabindex="-1"></a>                 <span class="va">order_id:</span> <span class="dv">1234</span></span>
<span id="cb545-47"><a href="win-with-pure-logic.html#cb545-47" tabindex="-1"></a>               <span class="fu">}</span></span>
<span id="cb545-48"><a href="win-with-pure-logic.html#cb545-48" tabindex="-1"></a>             <span class="fu">})</span>,</span>
<span id="cb545-49"><a href="win-with-pure-logic.html#cb545-49" tabindex="-1"></a>             <span class="va">:ignored</span>,</span>
<span id="cb545-50"><a href="win-with-pure-logic.html#cb545-50" tabindex="-1"></a>             <span class="va">:ignored</span></span>
<span id="cb545-51"><a href="win-with-pure-logic.html#cb545-51" tabindex="-1"></a>           <span class="fu">)</span> <span class="op">==</span> <span class="va">:fetch_buy_order</span></span>
<span id="cb545-52"><a href="win-with-pure-logic.html#cb545-52" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb545-53"><a href="win-with-pure-logic.html#cb545-53" tabindex="-1"></a></span>
<span id="cb545-54"><a href="win-with-pure-logic.html#cb545-54" tabindex="-1"></a>  <span class="ot">@tag</span> <span class="va">:unit</span></span>
<span id="cb545-55"><a href="win-with-pure-logic.html#cb545-55" tabindex="-1"></a>  test <span class="st">&quot;Generating finish position decision&quot;</span> <span class="kw">do</span></span>
<span id="cb545-56"><a href="win-with-pure-logic.html#cb545-56" tabindex="-1"></a>    assert <span class="cn">Strategy</span><span class="op">.</span>generate_decision<span class="fu">(</span></span>
<span id="cb545-57"><a href="win-with-pure-logic.html#cb545-57" tabindex="-1"></a>             %<span class="cn">TradeEvent</span><span class="fu">{}</span>,</span>
<span id="cb545-58"><a href="win-with-pure-logic.html#cb545-58" tabindex="-1"></a>             generate_position<span class="fu">(</span>%<span class="fu">{</span></span>
<span id="cb545-59"><a href="win-with-pure-logic.html#cb545-59" tabindex="-1"></a>               <span class="va">buy_order:</span> %<span class="cn">Binance</span><span class="op">.</span><span class="cn">OrderResponse</span><span class="fu">{</span></span>
<span id="cb545-60"><a href="win-with-pure-logic.html#cb545-60" tabindex="-1"></a>                 <span class="va">status:</span> <span class="st">&quot;FILLED&quot;</span></span>
<span id="cb545-61"><a href="win-with-pure-logic.html#cb545-61" tabindex="-1"></a>               <span class="fu">}</span>,</span>
<span id="cb545-62"><a href="win-with-pure-logic.html#cb545-62" tabindex="-1"></a>               <span class="va">sell_order:</span> %<span class="cn">Binance</span><span class="op">.</span><span class="cn">OrderResponse</span><span class="fu">{</span></span>
<span id="cb545-63"><a href="win-with-pure-logic.html#cb545-63" tabindex="-1"></a>                 <span class="va">status:</span> <span class="st">&quot;FILLED&quot;</span></span>
<span id="cb545-64"><a href="win-with-pure-logic.html#cb545-64" tabindex="-1"></a>               <span class="fu">}</span></span>
<span id="cb545-65"><a href="win-with-pure-logic.html#cb545-65" tabindex="-1"></a>             <span class="fu">})</span>,</span>
<span id="cb545-66"><a href="win-with-pure-logic.html#cb545-66" tabindex="-1"></a>             <span class="va">:ignored</span>,</span>
<span id="cb545-67"><a href="win-with-pure-logic.html#cb545-67" tabindex="-1"></a>             %<span class="fu">{</span><span class="va">status:</span> <span class="st">&quot;on&quot;</span><span class="fu">}</span></span>
<span id="cb545-68"><a href="win-with-pure-logic.html#cb545-68" tabindex="-1"></a>           <span class="fu">)</span> <span class="op">==</span> <span class="va">:finished</span></span>
<span id="cb545-69"><a href="win-with-pure-logic.html#cb545-69" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb545-70"><a href="win-with-pure-logic.html#cb545-70" tabindex="-1"></a></span>
<span id="cb545-71"><a href="win-with-pure-logic.html#cb545-71" tabindex="-1"></a>  <span class="ot">@tag</span> <span class="va">:unit</span></span>
<span id="cb545-72"><a href="win-with-pure-logic.html#cb545-72" tabindex="-1"></a>  test <span class="st">&quot;Generating exit position decision&quot;</span> <span class="kw">do</span></span>
<span id="cb545-73"><a href="win-with-pure-logic.html#cb545-73" tabindex="-1"></a>    assert <span class="cn">Strategy</span><span class="op">.</span>generate_decision<span class="fu">(</span></span>
<span id="cb545-74"><a href="win-with-pure-logic.html#cb545-74" tabindex="-1"></a>             %<span class="cn">TradeEvent</span><span class="fu">{}</span>,</span>
<span id="cb545-75"><a href="win-with-pure-logic.html#cb545-75" tabindex="-1"></a>             generate_position<span class="fu">(</span>%<span class="fu">{</span></span>
<span id="cb545-76"><a href="win-with-pure-logic.html#cb545-76" tabindex="-1"></a>               <span class="va">buy_order:</span> %<span class="cn">Binance</span><span class="op">.</span><span class="cn">OrderResponse</span><span class="fu">{</span></span>
<span id="cb545-77"><a href="win-with-pure-logic.html#cb545-77" tabindex="-1"></a>                 <span class="va">status:</span> <span class="st">&quot;FILLED&quot;</span></span>
<span id="cb545-78"><a href="win-with-pure-logic.html#cb545-78" tabindex="-1"></a>               <span class="fu">}</span>,</span>
<span id="cb545-79"><a href="win-with-pure-logic.html#cb545-79" tabindex="-1"></a>               <span class="va">sell_order:</span> %<span class="cn">Binance</span><span class="op">.</span><span class="cn">OrderResponse</span><span class="fu">{</span></span>
<span id="cb545-80"><a href="win-with-pure-logic.html#cb545-80" tabindex="-1"></a>                 <span class="va">status:</span> <span class="st">&quot;FILLED&quot;</span></span>
<span id="cb545-81"><a href="win-with-pure-logic.html#cb545-81" tabindex="-1"></a>               <span class="fu">}</span></span>
<span id="cb545-82"><a href="win-with-pure-logic.html#cb545-82" tabindex="-1"></a>             <span class="fu">})</span>,</span>
<span id="cb545-83"><a href="win-with-pure-logic.html#cb545-83" tabindex="-1"></a>             <span class="va">:ignored</span>,</span>
<span id="cb545-84"><a href="win-with-pure-logic.html#cb545-84" tabindex="-1"></a>             %<span class="fu">{</span><span class="va">status:</span> <span class="st">&quot;shutdown&quot;</span><span class="fu">}</span></span>
<span id="cb545-85"><a href="win-with-pure-logic.html#cb545-85" tabindex="-1"></a>           <span class="fu">)</span> <span class="op">==</span> <span class="va">:exit</span></span>
<span id="cb545-86"><a href="win-with-pure-logic.html#cb545-86" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb545-87"><a href="win-with-pure-logic.html#cb545-87" tabindex="-1"></a></span>
<span id="cb545-88"><a href="win-with-pure-logic.html#cb545-88" tabindex="-1"></a>  <span class="ot">@tag</span> <span class="va">:unit</span></span>
<span id="cb545-89"><a href="win-with-pure-logic.html#cb545-89" tabindex="-1"></a>  test <span class="st">&quot;Generating fetch sell order decision&quot;</span> <span class="kw">do</span></span>
<span id="cb545-90"><a href="win-with-pure-logic.html#cb545-90" tabindex="-1"></a>    assert <span class="cn">Strategy</span><span class="op">.</span>generate_decision<span class="fu">(</span></span>
<span id="cb545-91"><a href="win-with-pure-logic.html#cb545-91" tabindex="-1"></a>             %<span class="cn">TradeEvent</span><span class="fu">{</span></span>
<span id="cb545-92"><a href="win-with-pure-logic.html#cb545-92" tabindex="-1"></a>               <span class="va">seller_order_id:</span> <span class="dv">1234</span></span>
<span id="cb545-93"><a href="win-with-pure-logic.html#cb545-93" tabindex="-1"></a>             <span class="fu">}</span>,</span>
<span id="cb545-94"><a href="win-with-pure-logic.html#cb545-94" tabindex="-1"></a>             generate_position<span class="fu">(</span>%<span class="fu">{</span></span>
<span id="cb545-95"><a href="win-with-pure-logic.html#cb545-95" tabindex="-1"></a>               <span class="va">buy_order:</span> %<span class="cn">Binance</span><span class="op">.</span><span class="cn">OrderResponse</span><span class="fu">{}</span>,</span>
<span id="cb545-96"><a href="win-with-pure-logic.html#cb545-96" tabindex="-1"></a>               <span class="va">sell_order:</span> %<span class="cn">Binance</span><span class="op">.</span><span class="cn">OrderResponse</span><span class="fu">{</span></span>
<span id="cb545-97"><a href="win-with-pure-logic.html#cb545-97" tabindex="-1"></a>                 <span class="va">order_id:</span> <span class="dv">1234</span></span>
<span id="cb545-98"><a href="win-with-pure-logic.html#cb545-98" tabindex="-1"></a>               <span class="fu">}</span></span>
<span id="cb545-99"><a href="win-with-pure-logic.html#cb545-99" tabindex="-1"></a>             <span class="fu">})</span>,</span>
<span id="cb545-100"><a href="win-with-pure-logic.html#cb545-100" tabindex="-1"></a>             <span class="va">:ignored</span>,</span>
<span id="cb545-101"><a href="win-with-pure-logic.html#cb545-101" tabindex="-1"></a>             <span class="va">:ignored</span></span>
<span id="cb545-102"><a href="win-with-pure-logic.html#cb545-102" tabindex="-1"></a>           <span class="fu">)</span> <span class="op">==</span> <span class="va">:fetch_sell_order</span></span>
<span id="cb545-103"><a href="win-with-pure-logic.html#cb545-103" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb545-104"><a href="win-with-pure-logic.html#cb545-104" tabindex="-1"></a></span>
<span id="cb545-105"><a href="win-with-pure-logic.html#cb545-105" tabindex="-1"></a>  <span class="ot">@tag</span> <span class="va">:unit</span></span>
<span id="cb545-106"><a href="win-with-pure-logic.html#cb545-106" tabindex="-1"></a>  test <span class="st">&quot;Generating rebuy decision&quot;</span> <span class="kw">do</span></span>
<span id="cb545-107"><a href="win-with-pure-logic.html#cb545-107" tabindex="-1"></a>    assert <span class="cn">Strategy</span><span class="op">.</span>generate_decision<span class="fu">(</span></span>
<span id="cb545-108"><a href="win-with-pure-logic.html#cb545-108" tabindex="-1"></a>             %<span class="cn">TradeEvent</span><span class="fu">{</span></span>
<span id="cb545-109"><a href="win-with-pure-logic.html#cb545-109" tabindex="-1"></a>               <span class="va">price:</span> <span class="st">&quot;0.89&quot;</span></span>
<span id="cb545-110"><a href="win-with-pure-logic.html#cb545-110" tabindex="-1"></a>             <span class="fu">}</span>,</span>
<span id="cb545-111"><a href="win-with-pure-logic.html#cb545-111" tabindex="-1"></a>             generate_position<span class="fu">(</span>%<span class="fu">{</span></span>
<span id="cb545-112"><a href="win-with-pure-logic.html#cb545-112" tabindex="-1"></a>               <span class="va">buy_order:</span> %<span class="cn">Binance</span><span class="op">.</span><span class="cn">OrderResponse</span><span class="fu">{</span></span>
<span id="cb545-113"><a href="win-with-pure-logic.html#cb545-113" tabindex="-1"></a>                 <span class="va">price:</span> <span class="st">&quot;1.00&quot;</span></span>
<span id="cb545-114"><a href="win-with-pure-logic.html#cb545-114" tabindex="-1"></a>               <span class="fu">}</span>,</span>
<span id="cb545-115"><a href="win-with-pure-logic.html#cb545-115" tabindex="-1"></a>               <span class="va">rebuy_interval:</span> <span class="st">&quot;0.1&quot;</span>,</span>
<span id="cb545-116"><a href="win-with-pure-logic.html#cb545-116" tabindex="-1"></a>               <span class="va">rebuy_notified:</span> <span class="cn">false</span></span>
<span id="cb545-117"><a href="win-with-pure-logic.html#cb545-117" tabindex="-1"></a>             <span class="fu">})</span>,</span>
<span id="cb545-118"><a href="win-with-pure-logic.html#cb545-118" tabindex="-1"></a>             <span class="ot">[</span><span class="va">:position</span><span class="ot">]</span>,</span>
<span id="cb545-119"><a href="win-with-pure-logic.html#cb545-119" tabindex="-1"></a>             %<span class="fu">{</span><span class="va">status:</span> <span class="st">&quot;on&quot;</span>, <span class="va">chunks:</span> <span class="dv">2</span><span class="fu">}</span></span>
<span id="cb545-120"><a href="win-with-pure-logic.html#cb545-120" tabindex="-1"></a>           <span class="fu">)</span> <span class="op">==</span> <span class="va">:rebuy</span></span>
<span id="cb545-121"><a href="win-with-pure-logic.html#cb545-121" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb545-122"><a href="win-with-pure-logic.html#cb545-122" tabindex="-1"></a></span>
<span id="cb545-123"><a href="win-with-pure-logic.html#cb545-123" tabindex="-1"></a>  <span class="ot">@tag</span> <span class="va">:unit</span></span>
<span id="cb545-124"><a href="win-with-pure-logic.html#cb545-124" tabindex="-1"></a>  test <span class="st">&quot;Generating skip(rebuy) decision because rebuy is already notified&quot;</span> <span class="kw">do</span></span>
<span id="cb545-125"><a href="win-with-pure-logic.html#cb545-125" tabindex="-1"></a>    assert <span class="cn">Strategy</span><span class="op">.</span>generate_decision<span class="fu">(</span></span>
<span id="cb545-126"><a href="win-with-pure-logic.html#cb545-126" tabindex="-1"></a>             %<span class="cn">TradeEvent</span><span class="fu">{</span></span>
<span id="cb545-127"><a href="win-with-pure-logic.html#cb545-127" tabindex="-1"></a>               <span class="va">price:</span> <span class="st">&quot;0.89&quot;</span></span>
<span id="cb545-128"><a href="win-with-pure-logic.html#cb545-128" tabindex="-1"></a>             <span class="fu">}</span>,</span>
<span id="cb545-129"><a href="win-with-pure-logic.html#cb545-129" tabindex="-1"></a>             generate_position<span class="fu">(</span>%<span class="fu">{</span></span>
<span id="cb545-130"><a href="win-with-pure-logic.html#cb545-130" tabindex="-1"></a>               <span class="va">buy_order:</span> %<span class="cn">Binance</span><span class="op">.</span><span class="cn">OrderResponse</span><span class="fu">{</span></span>
<span id="cb545-131"><a href="win-with-pure-logic.html#cb545-131" tabindex="-1"></a>                 <span class="va">price:</span> <span class="st">&quot;1.00&quot;</span></span>
<span id="cb545-132"><a href="win-with-pure-logic.html#cb545-132" tabindex="-1"></a>               <span class="fu">}</span>,</span>
<span id="cb545-133"><a href="win-with-pure-logic.html#cb545-133" tabindex="-1"></a>               <span class="va">rebuy_interval:</span> <span class="st">&quot;0.1&quot;</span>,</span>
<span id="cb545-134"><a href="win-with-pure-logic.html#cb545-134" tabindex="-1"></a>               <span class="va">rebuy_notified:</span> <span class="cn">true</span></span>
<span id="cb545-135"><a href="win-with-pure-logic.html#cb545-135" tabindex="-1"></a>             <span class="fu">})</span>,</span>
<span id="cb545-136"><a href="win-with-pure-logic.html#cb545-136" tabindex="-1"></a>             <span class="ot">[</span><span class="va">:position</span><span class="ot">]</span>,</span>
<span id="cb545-137"><a href="win-with-pure-logic.html#cb545-137" tabindex="-1"></a>             %<span class="fu">{</span><span class="va">status:</span> <span class="st">&quot;on&quot;</span>, <span class="va">chunks:</span> <span class="dv">2</span><span class="fu">}</span></span>
<span id="cb545-138"><a href="win-with-pure-logic.html#cb545-138" tabindex="-1"></a>           <span class="fu">)</span> <span class="op">==</span> <span class="va">:skip</span></span>
<span id="cb545-139"><a href="win-with-pure-logic.html#cb545-139" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb545-140"><a href="win-with-pure-logic.html#cb545-140" tabindex="-1"></a></span>
<span id="cb545-141"><a href="win-with-pure-logic.html#cb545-141" tabindex="-1"></a>  <span class="ot">@tag</span> <span class="va">:unit</span></span>
<span id="cb545-142"><a href="win-with-pure-logic.html#cb545-142" tabindex="-1"></a>  test <span class="st">&quot;Generating skip rebuy decision&quot;</span> <span class="kw">do</span></span>
<span id="cb545-143"><a href="win-with-pure-logic.html#cb545-143" tabindex="-1"></a>    assert <span class="cn">Strategy</span><span class="op">.</span>generate_decision<span class="fu">(</span></span>
<span id="cb545-144"><a href="win-with-pure-logic.html#cb545-144" tabindex="-1"></a>             %<span class="cn">TradeEvent</span><span class="fu">{</span></span>
<span id="cb545-145"><a href="win-with-pure-logic.html#cb545-145" tabindex="-1"></a>               <span class="va">price:</span> <span class="st">&quot;0.9&quot;</span></span>
<span id="cb545-146"><a href="win-with-pure-logic.html#cb545-146" tabindex="-1"></a>             <span class="fu">}</span>,</span>
<span id="cb545-147"><a href="win-with-pure-logic.html#cb545-147" tabindex="-1"></a>             generate_position<span class="fu">(</span>%<span class="fu">{</span></span>
<span id="cb545-148"><a href="win-with-pure-logic.html#cb545-148" tabindex="-1"></a>               <span class="va">buy_order:</span> %<span class="cn">Binance</span><span class="op">.</span><span class="cn">OrderResponse</span><span class="fu">{</span></span>
<span id="cb545-149"><a href="win-with-pure-logic.html#cb545-149" tabindex="-1"></a>                 <span class="va">price:</span> <span class="st">&quot;1.00&quot;</span></span>
<span id="cb545-150"><a href="win-with-pure-logic.html#cb545-150" tabindex="-1"></a>               <span class="fu">}</span>,</span>
<span id="cb545-151"><a href="win-with-pure-logic.html#cb545-151" tabindex="-1"></a>               <span class="va">rebuy_interval:</span> <span class="st">&quot;0.1&quot;</span>,</span>
<span id="cb545-152"><a href="win-with-pure-logic.html#cb545-152" tabindex="-1"></a>               <span class="va">rebuy_notified:</span> <span class="cn">false</span></span>
<span id="cb545-153"><a href="win-with-pure-logic.html#cb545-153" tabindex="-1"></a>             <span class="fu">})</span>,</span>
<span id="cb545-154"><a href="win-with-pure-logic.html#cb545-154" tabindex="-1"></a>             <span class="ot">[</span><span class="va">:position</span><span class="ot">]</span>,</span>
<span id="cb545-155"><a href="win-with-pure-logic.html#cb545-155" tabindex="-1"></a>             %<span class="fu">{</span><span class="va">status:</span> <span class="st">&quot;on&quot;</span>, <span class="va">chunks:</span> <span class="dv">1</span><span class="fu">}</span></span>
<span id="cb545-156"><a href="win-with-pure-logic.html#cb545-156" tabindex="-1"></a>           <span class="fu">)</span> <span class="op">==</span> <span class="va">:skip</span></span>
<span id="cb545-157"><a href="win-with-pure-logic.html#cb545-157" tabindex="-1"></a>  <span class="kw">end</span></span></code></pre></div>
<p>This brings us to 12 tests:</p>
<pre><code>$ MIX_ENV=test mix test.unit
...
==&gt; naive
...
12 tests, 0 failures, 1 excluded</code></pre>
<p>The above tests are straightforward and uneventful, but that’s good. They prove that tests of pure code are easy to write and maintain.</p>
<p>Furthermore, besides the <code>generate_decision/4</code> function, we also have <code>generate_decisions/4</code>, <code>parse_results/1</code> and helper methods that are all pure functions. After a little bit of math, we can work out that out of 424 lines, 262 lines contain pure code - that’s a whopping 61%.</p>
<p>The above shows that we can gain great coverage and easy maintainability by splitting our business logic into pure and effectful functions. This approach is the most pragmatic execution of functional programming and can easily be proven to bring quantitative benefits.</p>
<p>In this chapter, we’ve tested our trading strategy, emphasizing the simplicity gained from separating pure/non-pure code.</p>
<p>[Note] Please remember to run the <code>mix format</code> to keep things nice and tidy.</p>
<p>The source code for this chapter can be found on <a href="https://github.com/Cinderella-Man/hands-on-elixir-and-otp-cryptocurrency-trading-bot-source-code/tree/chapter_22">GitHub</a></p>

<p>Chapter 23</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="layers-of-abstraction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="back-to-the-monolith.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Cinderella-Man/hands-on-elixir-and-otp-cryptocurrency-trading-bot/edit/main/22-80-20-win-with-pure-code.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
